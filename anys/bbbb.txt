以下`CMakeLists.txt`を用意する

    cmake_minimum_required(VERSION 3.14)
    project(my_project)

    # GoogleTest requires at least C++14
    set(CMAKE_CXX_STANDARD 14)
    set(CMAKE_CXX_STANDARD_REQUIRED ON)

    include(FetchContent)
    FetchContent_Declare(
    googletest
    GIT_REPOSITORY https://github.com/google/googletest.git
    GIT_TAG        f8d7d77c06936315286eb55f8de22cd23c188571
    )
    # For Windows: Prevent overriding the parent project's compiler/linker settings
    set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
    FetchContent_MakeAvailable(googletest)

同フォルダ内で以下コマンドを実行

    cmake -S . -B build -G Ninja

以下はスキップできる 

    <!-- さらに以下コマンドを実行

        cmake --build build -->

作成されたbuildフォルダに以下`hello_test.cc`を用意する

    #include <gtest/gtest.h>

    // Demonstrate some basic assertions.
    TEST(HelloTest, BasicAssertions) {
    // Expect two strings not to be equal.
    EXPECT_STRNE("hello", "world");
    // Expect equality.
    EXPECT_EQ(7 * 6, 42);
    }

最初に用意した`CMakeLists.txt`に以下を追記する

    enable_testing()

    add_executable(
    hello_test
    hello_test.cc
    )
    target_link_libraries(
    hello_test
    GTest::gtest_main
    )

    include(GoogleTest)
    gtest_discover_tests(hello_test)

最初に用意した`CMakeLists.txt`のフォルダで再度以下実行する

    cmake --build build

コマンド完了後、以下実行する

    cd build && ctest
